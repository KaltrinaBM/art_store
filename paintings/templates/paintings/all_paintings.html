{% extends "base.html" %}

{% block content %}
<div class="container">
    <h1>All Paintings</h1>

    <!-- Sorting Options -->
    <div class="mb-3">
        <label for="sort_by">Sort By:</label>
        <select id="sort_by" class="form-select" onchange="applySort()">
            <option value="title_asc" {% if sort_by == 'title' and order == 'asc' %}selected{% endif %}>Title (A-Z)</option>
            <option value="title_desc" {% if sort_by == 'title' and order == 'desc' %}selected{% endif %}>Title (Z-A)</option>
            <option value="price_asc" {% if sort_by == 'price' and order == 'asc' %}selected{% endif %}>Price (Low to High)</option>
            <option value="price_desc" {% if sort_by == 'price' and order == 'desc' %}selected{% endif %}>Price (High to Low)</option>
        </select>
    </div>

    <!-- Painting List -->
    <div class="row">
        {% for painting in paintings %}
            <div class="col-sm-12 col-md-6 col-lg-4 col-xl-3 mb-4">
                <div class="painting-container">
                    <img src="{{ painting.image.url }}" class="img-fluid" alt="{{ painting.title }}">
                    <div class="painting-footer">
                        <h5>{{ painting.title }}</h5>
                        <p><strong>Price:</strong> ${{ painting.price }}</p>
                        <a href="{% url 'painting_detail' painting.pk %}" class="btn btn-primary">View Details</a>
                    </div>
                </div>
            </div>
        {% endfor %}
    </div>
</div>

<script>
function applySort() {
    const sortValue = document.getElementById('sort_by').value;
    let [sort_by, order] = sortValue.split('_');
    window.location.href = `?sort_by=${sort_by}&order=${order}`;
}
</script>
{% endblock %}
